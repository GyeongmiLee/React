<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* ë™ê¸°ì™€ ë¹„ë™ê¸° */

        /* ë™ê¸° ë°©ì‹ */
        console.log("**ë™ê¸° ë°©ì‹**");
        function taskA() {
            console.log("A ì‘ì—… ë");
        }
        taskA();
        console.log("ì½”ë“œ ë"); //a ì‘ì—…ì´ ëë‚ ë•Œê¹Œì§€ëŠ” "ì½”ë“œ ë"ì´ë¼ëŠ” ì½”ë“œë¥¼ ì½ì„ìˆ˜ ì—†ìŒ(ë™ê¸°ì²˜ë¦¬)

        /* ìœ„ ì½”ë“œë¥¼ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë°”ê¿”ë³´ê¸° */
        console.log("**ë¹„ë™ê¸° ë°©ì‹**");
        //setTimeout : ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜
        function taskB() {
            setTimeout(() => { console.log("A Task End") }, 2000);
        } // 2ì´ˆí›„ ì‹¤í–‰
        taskB();
        console.log("ì½”ë“œ ë");

        /* ë¹„ë™ê¸° ì²˜ë¦¬ì˜ ê²°ê³¼ê°’ì„ ì½œë°±í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ì„œ ì´ìš©í•˜ê¸° */
        console.log("**ë¹„ë™ê¸° ë°©ì‹+ì½œë°±í•¨ìˆ˜**");

        function taskC(a, b, cb) {
            setTimeout(() => {
                const res = a + b; //ìš°ë¦° a+b ê°’ì„ ë°–ì—ì„œë„ ì•Œì•„ë³´ê¸¸ ì›í•¨
                cb(res); // functionìœ¼ë¡œ ë“¤ì–´ê°€ì„œ ê²°ê³¼ê°’ ë‚˜ì˜´ cb(7)ì¸ê±°ì²˜ëŸ¼!
            }, 2000);
        }
        taskC(3, 4, (res) => { console.log("2ì´ˆí›„ì— ë‚˜ì˜¤ëŠ” ê²°ê³¼" + res) }) //ë‚˜ì¤‘ì— ì‹¤í–‰
        console.log("ì½”ë“œ ë"); // ë¨¼ì € ì‹¤í–‰ë˜ê³  

        /* 1ì´ˆ ë’¤ì— ì „ë‹¬ë°›ì€ íŒŒë¼ë¯¸í„° ê°’ *2 í•˜ëŠ” í•¨ìˆ˜ ë§Œë“¤ê¸° */
        function double(a, cb) {
            setTimeout(() => {
                const res = a * 2;
                cb(res);
            }, 1000);

        }
        double(3, (res) => {
            console.log("1ì´ˆ í›„ì— ë‚˜ì˜¤ëŠ” ê²°ê³¼" + res);
        });

        /* JS Engine- callstackì˜ ì‹¤í–‰ ìˆœì„œ */
        //
        //1ï¸âƒ£ main contextê°€ ë¨¼ì € ë“¤ì–´ì˜¤ë©´ì„œ í”„ë¡œê·¸ë¨ ì‹œì‘
        function one() {
            return 1; //5ï¸âƒ£  ë“¤ì–´ì™€ì„œ 1 ë¦¬í„´í•˜ê³  6ï¸âƒ£one() í•¨ìˆ˜ out
        }
        function two() {
            return one() + 1; //4ï¸âƒ£í•¨ìˆ˜ ë“¤ì–´ì™€ì„œ ë¦¬í„´í•˜ë ¤ê³  ë³´ë‹ˆê¹Œ one() í˜¸ì¶œ 7ï¸âƒ£ two() out
        }
        function three() {
            return two() + 1; //3ï¸âƒ£í•¨ìˆ˜ ë“¤ì–´ì™€ì„œ ë¦¬í„´í•˜ë ¤ê³  ë³´ë‹ˆê¹Œ two() í˜¸ì¶œí•¨ 8ï¸âƒ£ three() out
        }

        console.log(three()); // 2ï¸âƒ£three() í•¨ìˆ˜ ë“¤ì–´ì˜´ 9ï¸âƒ£3ì„ ì½˜ì†”ì— ì°ê³  ğŸ”Ÿmain contexteh out


        /* ë¹„ë™ê¸° í”„ë¡œê·¸ë¨ ë§Œë“¤ê¸° */
        function taskD(a, b, cb) {
            setTimeout(() => {
                const res = a + b;
                cb(res);
            }, 3000)
        }

        function taskE(a, cb) {
            setTimeout(() => {
                const res = a * 2;
                cb(res)
            }, 1000)
        }

        function taskF(a, cb) {
            setTimeout(() => {
                const res = a * -1;
                cb(res)
            }, 2000)
        }

        taskD(4, 5, (a_res) => {
            console.log("D REULST", a_res);
            taskE(a_res, (b_res) => {
                console.log("E RESULT", b_res);
                taskF(b_res, (c_res) => {
                    console.log("F RESULT", c_res);
                })
            })
        }) //ì½œë°±ì§€ì˜¥ì„...
        console.log("ì½”ë“œ ë")
    </script>
</body>

</html>